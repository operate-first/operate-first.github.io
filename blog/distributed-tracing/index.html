<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 4.25.8"/><style data-href="/styles.c151588f13a34a9ba17f.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{color:#393a34;direction:ltr;font-family:Consolas,Bitstream Vera Sans Mono,Courier New,Courier,monospace;font-size:.9em;-webkit-hyphens:none;hyphens:none;line-height:1.2em;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}pre>code[class*=language-]{font-size:1em}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:#b3d4fc}pre[class*=language-]{background-color:#fff;border:1px solid #ddd;margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-]{background:#f8f8f8;border:1px solid #ddd;padding:1px .2em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#998;font-style:italic}.token.namespace{opacity:.7}.token.attr-value,.token.string{color:#e3116c}.token.operator,.token.punctuation{color:#393a34}.token.boolean,.token.constant,.token.entity,.token.inserted,.token.number,.token.property,.token.regex,.token.symbol,.token.url,.token.variable{color:#36acaa}.language-autohotkey .token.selector,.token.atrule,.token.attr-name,.token.keyword{color:#00a4db}.language-autohotkey .token.tag,.token.deleted,.token.function{color:#9a050f}.language-autohotkey .token.keyword,.token.selector,.token.tag{color:#00009f}.token.bold,.token.function,.token.important{font-weight:700}.token.italic{font-style:italic}body{margin:0;padding:0}</style><style data-emotion="mantine "></style><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-178212082-1"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer && window.dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-178212082-1', {"send_page_view":false});gtag('config', 'G-TNPDM9W9HY', {"send_page_view":false});gtag('config', 'G-4KZBK0GHEG', {"send_page_view":false});
      }
      </script><link rel="icon" href="/favicon-32x32.png?v=bb7528b0b4b2b0e0a050e29226b51053" type="image/png"/><link rel="icon" href="/favicon.svg?v=bb7528b0b4b2b0e0a050e29226b51053" type="image/svg+xml"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=bb7528b0b4b2b0e0a050e29226b51053"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=bb7528b0b4b2b0e0a050e29226b51053"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=bb7528b0b4b2b0e0a050e29226b51053"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=bb7528b0b4b2b0e0a050e29226b51053"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=bb7528b0b4b2b0e0a050e29226b51053"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=bb7528b0b4b2b0e0a050e29226b51053"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=bb7528b0b4b2b0e0a050e29226b51053"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=bb7528b0b4b2b0e0a050e29226b51053"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css-global zl4edr">html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-moz-text-size-adjust:100%;-ms-text-size-adjust:100%;text-size-adjust:100%;}body{margin:0;}article,aside,footer,header,nav,section,figcaption,figure,main{display:block;}h1{font-size:2em;}hr{box-sizing:content-box;height:0;overflow:visible;}pre{font-family:monospace,monospace;font-size:1em;}a{background:transparent;text-decoration-skip:objects;}a:active,a:hover{outline-width:0;}abbr[title]{border-bottom:none;-webkit-text-decoration:underline;text-decoration:underline;}b,strong{font-weight:bolder;}code,kbp,samp{font-family:monospace,monospace;font-size:1em;}dfn{font-style:italic;}mark{background-color:#ff0;color:#000;}small{font-size:80%;}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline;}sup{top:-0.5em;}sub{bottom:-0.25em;}audio,video{display:inline-block;}audio:not([controls]){display:none;height:0;}img{border-style:none;vertical-align:middle;}svg:not(:root){overflow:hidden;}button,input,optgroup,select,textarea{font-family:sans-serif;font-size:100%;line-height:1.15;margin:0;}button,input{overflow:visible;}button,select{text-transform:none;}button,[type=reset],[type=submit]{-webkit-appearance:button;}button::-moz-focus-inner,[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{border-style:none;padding:0;}button:-moz-focusring,[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring{outline:1px dotted ButtonText;}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;}progress{display:inline-block;vertical-align:baseline;}textarea{overflow:auto;}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0;}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto;}[type=search]{-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;}::-webkit-file-upload-button{-webkit-appearance:button;-moz-appearance:button;-ms-appearance:button;appearance:button;font:inherit;}details,menu{display:block;}summary{display:-webkit-box;display:-webkit-list-item;display:-ms-list-itembox;display:list-item;}canvas{display:inline-block;}template{display:none;}[hidden]{display:none;}</style><style data-emotion="css-global ui06b9">*,*::before,*::after{box-sizing:border-box;}body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;background-color:#fff;color:#000;line-height:1.55;font-size:16px;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}</style><nav class="mantine-Header-root mantine-1c3jy3h"><div class="mantine-Container-root mantine-f4niag"><a href="/"><img src="/static/opf-logo-b2b74c6d556f96066bf5836da3e43d61.png" width="150px" alt="opf-logo" class="mantine-2atlof"/></a><div class="mantine-Group-root mantine-ju7u31"><a href="https://github.com/operate-first" target="_blank" rel="noreferrer" class="mantine-gnzaph mantine-Group-child"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke="white" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5"></path></svg></a><a href="https://www.youtube.com/channel/UCe87bwqlGoBQs2RvMQZ5_sg" alt="youtube" target="_blank" rel="noreferrer" class="mantine-gnzaph mantine-Group-child"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-youtube" width="24" height="24" viewBox="0 0 24 24" stroke="white" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><rect x="3" y="5" width="18" height="14" rx="4"></rect><path d="M10 9l5 3l-5 3z"></path></svg></a></div><button class="mantine-UnstyledButton-root mantine-Burger-root mantine-k6os6x" type="button"><div class="mantine-bb2lf6 mantine-Burger-burger"></div></button></div><style data-emotion="css-global 1yi5n03">:root{--mantine-header-height:60px;}</style></nav><div class="mantine-1shmqq6"><h1 class="mantine-Title-root mantine-1krktmh">Distributed Tracing!</h1><div class="mantine-Badge-light mantine-Badge-root mantine-tgir25"><span class="mantine-h9iq4m mantine-Badge-inner">Distributed Tracing</span></div><div class="mantine-Badge-light mantine-Badge-root mantine-tgir25"><span class="mantine-h9iq4m mantine-Badge-inner">Red Hat Distributed Tracing Platform</span></div><div class="mantine-Badge-light mantine-Badge-root mantine-tgir25"><span class="mantine-h9iq4m mantine-Badge-inner">Red Hat Distributed Tracing Data Collection</span></div><div class="mantine-Badge-light mantine-Badge-root mantine-tgir25"><span class="mantine-h9iq4m mantine-Badge-inner">Jaeger</span></div><div class="mantine-Badge-light mantine-Badge-root mantine-tgir25"><span class="mantine-h9iq4m mantine-Badge-inner">OpenTelemetry</span></div><div class="mantine-Text-root mantine-1fl13hf">06.07.2022<!-- --> â€” <span>6<!-- --> min read</span></div><p><em>Senior software engineer Sally Ann O&#x27;Malley describes recent additions to the Operate First cloud that simplify the collection of OpenTelemetry data.</em>
<em>Catch her on K8s slack or GitHub @sallyom</em></p><p>Over the past few years, the open source project <a href="https://opentelemetry.io/">OpenTelemetry</a> has advanced cloud-native observability.
As modern software platforms have become more distributed and complex, observing application data has become more critical and also more difficult.
OpenTelemetry is a collection of tools, APIs, standards, and SDKs to instrument, generate, collect, and export telemetry data (metrics, logs, and traces).
With OpenTelemetry (OTLP), end-users and developers are empowered to choose a telemetry backend that suits their needs.
It is vendor neutral, open source, and is supported by industry leaders in the observability space.
This post describes recent additions to the Operate First community cloud that have made it easy for users to collect and analyze OTLP.</p><p>To learn more about the Operate First <a href="https://www.operate-first.cloud/community-cloud/">community cloud</a> and how you can access it, visit the <a href="https://www.operate-first.cloud/getting-started">onboarding docs</a>.
If, like me, you&#x27;re a developer wishing to deploy your applications and perform testing in a production environment, you might start <a href="https://www.operate-first.cloud/developer">here</a>.
From there you can onboard your Kubernetes based cloud-native workloads with help from the Operate First community.</p><p>Recently, two Operators were deployed on the Operate First <code class="language-text">Smaug</code> cluster that enable collection of OTLP data from any application.
The operators are <code class="language-text">Red Hat Distributed Tracing Platform</code> and <code class="language-text">Red Hat Distributed Tracing Data Collection</code>.
The former includes a Jaeger operator for visualizing OTLP data and the latter includes the OpenTelemetry operator that manages namespaced OpenTelemetryCollectors to collect OTLP.
These and many other operators are available from the <a href="https://catalog.redhat.com/software/operators/explore">Certified OpenShift Operators Hub</a>.
This post describes how to connect your applications and workloads to these distributed tracing operators to reach your observability goals.
For an excellent overview of observability in general, check out <a href="https://developers.redhat.com/articles/2022/04/12/observability-2022-why-it-matters-and-how-opentelemetry-can-help#">this blog</a> from Ben Evans and <a href="https://developers.redhat.com/">Red Hat Developer</a>.</p><h3>Table of Contents</h3><ul><li><a href="#introduction">Introduction</a></li><li><a href="#red-hat-distributed-tracing-data-collection">Red Hat Distributed Tracing Data Collection</a></li><li><a href="#red-hat-distributed-tracing-platform">Red Hat Distributed Tracing Platform</a></li><li><a href="#example-application">Example Application</a></li><li><a href="#connecting-to-opentelemetry-collector">Connecting to OpenTelemetry Collector</a></li><li><a href="#connecting-to-jaeger">Connecting to Jaeger</a></li><li><a href="#visualizing-your-data">Visualizing Your Data</a></li><li><a href="#summary">Summary</a></li></ul><h3>Introduction</h3><p>With OpenTelemetry, it is relatively straight-forward and usually involves a few lines of code to add OTLP instrumentation.
In fact, it is a core mission of the OpenTelemetry project to make instrumenting easy and universal, to uncouple instrumentation from data storage and analysis.
The <a href="https://opentelemetry.io/docs/instrumentation/">instrumentation docs</a> are an excellent starting place.
The more complicated issue is how to collect, export, visualize, and analyze application data.
That is what has been simplified with the distributed tracing operators now running in Operate First.</p><h3>Red Hat Distributed Tracing Data Collection</h3><p>The Red Hat Distributed Tracing Data Collection operator is an opinionated OpenTelemetry Collector Operator.
It is easy to install from the OperatorHub as an OpenShift administrator.
Once running, regular users can create its custom resources in their own projects.
The operator watches all namespaces in the <code class="language-text">Smaug</code> cluster for namespaced custom resources <code class="language-text">OpenTelemetryCollector</code> and <code class="language-text">Instrumentation</code>.
In a cluster with this operator running, these resources can be accessed from the OpenShift console&#x27;s left navigation menu <code class="language-text">Installed Operators &gt; &lt;operator-name&gt;</code>.</p><p>The presence of an OpenTelemetryCollector in a namespace (project) triggers the creation of several resources in that namespace including a deployment of the OpenTelemetry Collector.
In simple terms, all that is required to launch an OTLP collector in your namespace is the creation of an OpenTelemetryCollector.
This custom resource configures OTLP receivers and exporters. An OTLP collector is an intermediary that allows OTLP data to be funnelled to a variety of backends.
Traces, logs, and metrics can be exported from an application with a single OTLP collector.</p><p>The presence of an <code class="language-text">Instrumentation</code> custom resource triggers the automatic instrumentation of an application.
This is available for a limited list of languages.
At this time Python, Java, and Ruby offer auto-instrumentation. For more information, visit the <a href="https://opentelemetry.io/docs/instrumentation/java/automatic/">automatic instrumentation docs</a>.</p><p>Visit the Red Hat Distributed Tracing Data Collection <a href="https://catalog.redhat.com/software/operators/detail/615486a469cb9f1af5ba7421">documentation</a> and the OpenTelemetry Operator project on <a href="https://github.com/open-telemetry/opentelemetry-operator">GitHub</a> for additional details and examples.</p><h3>Red Hat Distributed Tracing Platform</h3><p>The Red Hat Distributed Tracing Platform is an opinionated Jaeger Operator.
This operator watches all namespaces in the <code class="language-text">Smaug cluster</code> for any namespaced <code class="language-text">Jaeger</code> custom resources.
The presence of a Jaeger in a project triggers the creation of several resources including a deployment of Jaeger along with a route to the Jaeger frontend.
In a cluster with this operator running, these resources can be accessed from the OpenShift console&#x27;s left navigation menu <code class="language-text">Installed Operators &gt; &lt;operator-name&gt;</code>.</p><p>The example below creates an <code class="language-text">AllInOne</code> instance of Jaeger that uses in-memory storage.
For production modes, visit the Red Hat Distributed Tracing Platform <a href="https://catalog.redhat.com/software/operators/detail/5ec54a5c78e79e6a879fa271">documentation</a>.
Jaeger is a tool to analyze traces.
There are many vendors and open source projects that offer backends for traces, logs, and metrics - all of which can be funnelled through a single OTLP collector.
The <a href="https://opentelemetry.io/registry/">OpenTelemetry Registry</a> lists OTLP compatible tools.</p><h3>Example Application</h3><p>For this blog, an <a href="https://github.com/sallyom/golang-ex/tree/master/opentelemetry-sample-app">example golang application</a> is deployed in the Smaug cluster <code class="language-text">otel-dev</code> project.
The application includes a simple web server, a service that exposes port 8080 of the web server pod, and a route that exposes the service.
View the single yaml file <a href="https://github.com/sallyom/golang-ex/tree/master/opentelemetry-sample-app/sample-app-w-route.yaml">here</a>.</p><blockquote><p><strong>Note:</strong>
All objects will be created in <code class="language-text">otel-dev</code> namespace (project), including the namespace itself.</p></blockquote><p>Since Smaug is an OpenShift cluster, here we use the command-line tool <code class="language-text">oc</code>.
However, <code class="language-text">kubectl</code> can be substituted and used with any Kubernetes based cluster.</p><p><strong>Create the sample application</strong></p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">oc apply -f https://raw.githubusercontent.com/sallyom/golang-ex/master/opentelemetry-sample-app/sample-app-w-route.yaml</code></pre></div><p>Two files are served by this application.
A <a href="https://sample-app-otel-dev.apps.smaug.na.operate-first.cloud/hello"><code class="language-text">Hello OpenTelemetry</code></a> page and a <a href="https://sample-app-otel-dev.apps.smaug.na.operate-first.cloud/count"><code class="language-text">counter</code></a>.
Visiting the pages creates trace spans that can be collected with the OpenTelemetry Collector and visualized with Jaeger.</p><h3>Connecting to OpenTelemetry Collector</h3><p>Because the Smaug cluster is running the OpenTelemetry Operator, it is very easy to launch a collector in any namespace.
This is the OpenTelemetryCollector custom resource that was created in the <code class="language-text">otel-dev</code> project, alongside the example application.
This definition is also found <a href="https://github.com/sallyom/golang-ex/tree/master/opentelemetry-sample-app/otelcol.yaml">here</a></p><p><strong>otelcol.yaml</strong></p><div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ConfigMap
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">annotations</span><span class="token punctuation">:</span>
    <span class="token key atrule">service.beta.openshift.io/inject-cabundle</span><span class="token punctuation">:</span> <span class="token string">&quot;true&quot;</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> otelcol<span class="token punctuation">-</span>cabundle
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> otel<span class="token punctuation">-</span>dev
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> opentelemetry.io/v1alpha1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> OpenTelemetryCollector
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> otelcol
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> otel<span class="token punctuation">-</span>dev
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">config</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
    receivers:
      otlp:
        protocols:
          grpc:
          http:
    processors:
      batch:</span>

    <span class="token key atrule">exporters</span><span class="token punctuation">:</span>
      <span class="token key atrule">logging</span><span class="token punctuation">:</span>
        <span class="token key atrule">loglevel</span><span class="token punctuation">:</span> debug

      <span class="token key atrule">jaeger</span><span class="token punctuation">:</span>
        <span class="token key atrule">endpoint</span><span class="token punctuation">:</span> jaegerex<span class="token punctuation">-</span>collector<span class="token punctuation">-</span>headless.otel<span class="token punctuation">-</span>dev.svc<span class="token punctuation">:</span><span class="token number">14250</span>
        <span class="token key atrule">tls</span><span class="token punctuation">:</span>
          <span class="token key atrule">ca_file</span><span class="token punctuation">:</span> <span class="token string">&quot;/etc/pki/ca-trust/source/service-ca/service-ca.crt&quot;</span>

    <span class="token key atrule">service</span><span class="token punctuation">:</span>
      <span class="token key atrule">pipelines</span><span class="token punctuation">:</span>
        <span class="token key atrule">traces</span><span class="token punctuation">:</span>
          <span class="token key atrule">receivers</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>otlp<span class="token punctuation">]</span>
          <span class="token key atrule">processors</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>batch<span class="token punctuation">]</span>
          <span class="token key atrule">exporters</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>logging<span class="token punctuation">,</span>jaeger<span class="token punctuation">]</span>
  <span class="token key atrule">mode</span><span class="token punctuation">:</span> deployment
  <span class="token key atrule">resources</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token key atrule">targetAllocator</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token key atrule">volumeMounts</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /etc/pki/ca<span class="token punctuation">-</span>trust/source/service<span class="token punctuation">-</span>ca
    <span class="token key atrule">name</span><span class="token punctuation">:</span> cabundle<span class="token punctuation">-</span>volume
  <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">configMap</span><span class="token punctuation">:</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> otelcol<span class="token punctuation">-</span>cabundle
    <span class="token key atrule">name</span><span class="token punctuation">:</span> cabundle<span class="token punctuation">-</span>volume</code></pre></div><p>Notice the receivers are the default OTLP grpc and http values (left empty, the collector will use the defaults).
These are appropriate 99% of the time.
There are two exporters configured, <code class="language-text">Logging</code> and <code class="language-text">Jaeger</code>.
With the jaeger exporter, the <code class="language-text">endpoint</code> is specified along with the <code class="language-text">ca_file</code> that is mounted from the <code class="language-text">otelcol-cabundle</code> configmap.
This configmap utilizes OpenShift&#x27;s auto-certificate mechanism in which a configmap with the annotation <code class="language-text">service.beta.openshift.io/inject-cabundle: &quot;true&quot;</code> will result in that configmap populated with a Certificate Authority valid for the cluster, to enable secure communication with the Jaeger pod.
The <code class="language-text">mode</code> is also specified as a <code class="language-text">deployment</code>.
Once the receivers and exporters are configured, all that&#x27;s left to do is specify a service pipeline.
Here we&#x27;ve configured a <code class="language-text">traces</code> pipeline.
Refer to the <a href="https://opentelemetry.io/docs/collector/">OTLP Collector documentation</a> for more detailed explanations of its options.</p><p><strong>Create the OpenTelemetryCollector</strong></p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">oc apply -f https://raw.githubusercontent.com/sallyom/golang-ex/master/opentelemetry-sample-app/otelcol.yaml</code></pre></div><p>That&#x27;s it! Now the OTLP collector will be collecting trace data from any instrumented application that is running in the <code class="language-text">otel-dev</code> namespace and that is configured to connect to the collector service address.</p><blockquote><p><strong>Note:</strong>
The OpenTelemetryCollector is configured to connect to the Jaeger service at the default port <code class="language-text">14250</code>.
Below, when creating a <code class="language-text">Jaeger</code> instance, the resource name must match the name in the Jaeger service address listed in the collector.
Here it is <code class="language-text">jaegerex</code> where the service address will be <code class="language-text">jaegerex-collector-headless.otel-dev.svc:14250</code>.</p></blockquote><h3>Connecting to Jaeger</h3><p>Because the Smaug cluster is running the Jaeger Operator, it is easy to launch Jaeger in any namespace.
The Jaeger <code class="language-text">All-In-One</code> is created in the otel-dev namespace by searching <code class="language-text">API Explorer</code> for <code class="language-text">Jaeger</code> then <code class="language-text">Create Jaeger</code> under <code class="language-text">Instances</code>.
Also, because the OpenTelemetry collector is already configured to export and connect to the Jaeger service, this is all that is required.
This Jaeger resource triggers the creation of everything required to visualize the trace data from the OTel collector running in the same project.</p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:960px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:42.91666666666667%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAACBElEQVQoz3WRX4sSYRTG52a7SFPWHOePLTiz5eiusl1F+wG6CHRZb2ojKoKFigj6Gi2VttrWdQm2ak6N6VUfZRNbZhhEHYMQdkbfeeJ92Y3doAPP+QOHH8/hcN+7HXS7XeitFnS9dVx1tFqf8UXX0TYMGIaBdruNTqeDb20D+9UqavUmGo2v2G/qaNQ/kVr1I2rVDyZ3TdNwfX0dsiwjHo9DURQkEglWT/p/pagKVEVBNrMKLZmEpmkkk8lAVVWTS2XXkEyvQpCX8PLVazjOGAcHP2BZFiaTCRzH+a9GozHGYyZCZ8uyTG45mcZlbQVRQcbeu/cghMC2bbZIgxAfJ+Gz1j/WmSA0eZ5ncivZq6DQCC9ht/L2LMQnbHc+m9FlzDwPrjfDkUcwm8/Z7LkuNUF836cmTgFjEnbLFZTKeyhs3cOD+3dw93YBW7cKKGxuIJfLI5/PIbexiRs386g3mnDnPobjyV+Htm2bHD2XAqNiHG/KFTzcfoIL/BLil2TEIgEEAwGcDwQQDFIFEQqFcG5hATs7L9gRzq/fcN0jBhwMBiaXzqxhOZliT6EOHz19jggvQBQliKIAURAgnJIkSViMRFAqlRjw8PAndUavxnA4NDn6YfVKChdjEnO4/fgZQuFF8HwUPM8jGuVZPRGFhsNhFItFBuz1euj3+2Q6nWI0Gpl/AHTH1k7mWHdQAAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="Creation of Jaeger Instance from OpenShift console" title="Creation of Jaeger Instance from OpenShift console" src="/static/a7d031517882562aa453fa96b7ad7958/7d769/jaeger-shot.png" srcSet="/static/a7d031517882562aa453fa96b7ad7958/5243c/jaeger-shot.png 240w,/static/a7d031517882562aa453fa96b7ad7958/ab158/jaeger-shot.png 480w,/static/a7d031517882562aa453fa96b7ad7958/7d769/jaeger-shot.png 960w,/static/a7d031517882562aa453fa96b7ad7958/bc577/jaeger-shot.png 1283w" sizes="(max-width: 960px) 100vw, 960px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
    </span></p><p>Similar to the OpenTelemetryCollector, a Jaeger can also be created from the command line.
Here is the definition for the simplest All-In-One Jaeger resource.
The definition is also found <a href="https://github.com/sallyom/golang-ex/tree/master/opentelemetry-sample-app/jaeger.yaml">here</a>.</p><p><strong>jaeger.yaml</strong></p><div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> jaegertracing.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Jaeger
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> jaegerex
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> otel<span class="token punctuation">-</span>dev</code></pre></div><p><strong>Create a Jaeger instance</strong></p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">oc apply -f https://raw.githubusercontent.com/sallyom/golang-ex/master/opentelemetry-sample-app/jaeger.yaml</code></pre></div><h3>Visualizing Your Data</h3><p>Creation of a public route for the Jaeger frontend is triggered by the existence of a <code class="language-text">Jaeger</code>.
All that is left to do now is visit the frontend at the <code class="language-text">jaegerex</code> Route.</p><p>View the route from the application running in Operate First at <a href="https://jaegerex-otel-dev.apps.smaug.na.operate-first.cloud/">https://jaegerex-otel-dev.apps.smaug.na.operate-first.cloud/</a>.
You can generate trace data by visiting the <a href="https://sample-app-otel-dev.apps.smaug.na.operate-first.cloud/hello"><code class="language-text">/hello</code></a> and <a href="https://sample-app-otel-dev.apps.smaug.na.operate-first.cloud/count"><code class="language-text">/count</code></a> pages.</p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:960px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:67.08333333333334%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAACLklEQVQ4y6WSW08TQRiG9y94ilHBVlt6hgpuMSVimrSN2qCJF974V4CGtlSgiV4Ygl75N9QiAibqD/DOW2OIB6SUtrs7O7uP2SnLId5IfJM3s/vlmyfvfDPas6dPeLm8zMrzFRpLS9TrdSqVCrVqlWqlwnytpmqLi4s0Gg0WFh5TKZeZmZmlVqtTnV9gbm6O8myZ2elptPNnzxEPBIknU5w6fQZdz1AsFsnlchQKBeV8Pn/MhWKRQiFPqVTi3tQUd+/c5tHDB9yfKqENxZKE4ymuhKMEQxE+fPyEJ9u2+Vd5nZ+3BN87oMUSw+jjWTzwQCDE2rt1er0ehmEipVRgb3UcB9d11erb+/e01TJ5sbHF+y+7aNHEMOmxDEPRBAOBq2xsbqomy7KwhMC0LLrdrgIIy8K2xUEyIYSqH5U6ciw5QjAcVcDm2jodCabV3yhsQWu3pdJst/b49mOHdtfEcSS/29t0TBvpuNjSQUqnD0wMX+PqUIxLl4O8erOKdxDDFAoiHYlpmbiOw3bb4OuvDjsdC1tKDNHDsl3V549DC0cTRGJJlfDiYJDXzbcqmeEl3AcaZh/YNiQ/9wQ9y8FxHQxhII4CXRctnkpzfTyLN0sP2FztA72L8Bs99ddD+3X/27cWiadIj+qkx3QGg6FjQF+HUPY3HtYPuEcvJRSJK9iFgQDN5upfCU9iLZOdZGIyh35jgpFRnfWNzWPAk0obzWTJ3ryl3qI3R+9h/w/wD4pRRYCbVcU9AAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="Jaeger Route from OpenShift console" title="Jaeger Route from OpenShift console" src="/static/18f2bfaf5c4c49f163927663e7856e06/7d769/jaeger-route.png" srcSet="/static/18f2bfaf5c4c49f163927663e7856e06/5243c/jaeger-route.png 240w,/static/18f2bfaf5c4c49f163927663e7856e06/ab158/jaeger-route.png 480w,/static/18f2bfaf5c4c49f163927663e7856e06/7d769/jaeger-route.png 960w,/static/18f2bfaf5c4c49f163927663e7856e06/ed466/jaeger-route.png 1269w" sizes="(max-width: 960px) 100vw, 960px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
    </span></p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:960px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:64.99999999999999%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAACKklEQVQ4y42TS28aMRSF51e3lRopgwBl09If0C6qSt0GAoKQrNhkkaSLqGrVHQtKgTA247HHr3lwqmseUqMo6kif7LGvjs/1vY7acYzmp49oTyZonZ2hEcdot9toNptotVphjOMYjUYDp6en6HQ6uL25we3dHR4evuPzl684OXmLN69f4cP7d4h63S7OJxN0f/7Aea+H/sUFRpeXGI5GGA6HGAwG6PV6GPT76Ha7GI/HmM5mWC6XSJI1vt3fo9/vh9ir62tEtq7higKwFnVd43++7Qt7EWMMmzSF8x7GmECuDYQxsEUB7X04UFoHQzHeoyITZQlLFMURngpEm80GSZIgz/Mg5pxDUVVguQ5CmsTcTjQzNvzTvnQOQpsgSuLSewilEAkhkKZpECQxay2kEMilROH9P3g6zDkYraGVgiMD1iJXCibPw36klIKmgD3GWiwYw+/1Ixac4w9jRxKlwLUGy/MAzfl+TmTGICJ3WZYFdwQJLoXAjDHMOd9BBzCGtVJgWiN5wmGN7j2kTFDKJEy2V4xjulzh13yB2XwOzljYp9SUlKCsjkgZ1smYzDJEUsogRCMJ0x1677Gtq3DRxjmUZfkiRVlipRSktTuHh5T9Hp5lmK0TPDIGznloK3ITXD6Douz2zqNQCGOgjUFGhbEWPE2RpALTdYLFaoVMCBzinnJYX6Xprm2ooan0VIzMmtC4W3ox2214OfV+rKrqWeqqQllVENZCO4+/sbbJZD7n/7MAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="Jaeger Overview from Example App" title="Jaeger Overview from Example App" src="/static/4ac60ecee7bba5c097044ab960f87c4f/7d769/jaeger-overview.png" srcSet="/static/4ac60ecee7bba5c097044ab960f87c4f/5243c/jaeger-overview.png 240w,/static/4ac60ecee7bba5c097044ab960f87c4f/ab158/jaeger-overview.png 480w,/static/4ac60ecee7bba5c097044ab960f87c4f/7d769/jaeger-overview.png 960w,/static/4ac60ecee7bba5c097044ab960f87c4f/2d289/jaeger-overview.png 1266w" sizes="(max-width: 960px) 100vw, 960px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
    </span></p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:960px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:68.33333333333333%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAACJUlEQVQ4y32SS0/bQBSF/atL2w1RHvwLaNoVJEGp+g+qLroiiYPUVkBCAnnYwbFnxvPw2IRTzU0cUQRdfLr3zuP4nJG9Rr2Oer2OWq1GtVqt4ujoiPpGo0Hz4eEh4fpKpYJv3S4uLnro9Qf4/uMnqrU6Prw/wMeDd/DarRZOjo+Jz80mPp2c4EuzSb3bO+90cN5uo9NuU986O8PQ97FcLHB/d4eb6yt87XZxdnpKZzzz+AhpLYQx0EUBlefgWsNsNsg2G+TAnkcAG4DOMK2xTlMIk6EACPv0BC9MGB6EwFpKIhICiZTgSoEpRX0sUiRpup131X10f6bckxLe9WiE0XiMZRgiiiLMwhD+YolhEBD9+Ry9+xmGy4Bws4PmIEBvNkdvNsMwCDGYL+AN4gTDhBGXjONXwuDfTnA5vcNwMsXtOsaUMUyShJgSDOMowu/FAtfhirgKQ9ysVvB8LjDY0eMCf7jA+uEBWghIKZFphdyYV7Fa78nNtno+4yjpM06CcZJACIE41YilgsoyFEWBPM9R5DnVl7h9k2VbQefOOX0uqJREkmowqaCzDNIYpFpDaA1lDM0lbt19VCr1uqDYxXViTiCzFsZaEnYXy75kv1ZGfim4jmMIzhGnkn4FqTW5KN24aq39J76LrN5y6AQpsjBgcuuwdGN2uDX7DCf6X0HuHEqJgHOKXb5fCd89xXOHb0ZmjG3fME3BpYQx5nW0JhGHm92dv+D0BbfBNqqvAAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="Trace Data" title="Trace Data" src="/static/3dba0c72b33d90bfe101531a606fa751/7d769/jaeger-trace.png" srcSet="/static/3dba0c72b33d90bfe101531a606fa751/5243c/jaeger-trace.png 240w,/static/3dba0c72b33d90bfe101531a606fa751/ab158/jaeger-trace.png 480w,/static/3dba0c72b33d90bfe101531a606fa751/7d769/jaeger-trace.png 960w,/static/3dba0c72b33d90bfe101531a606fa751/f46b1/jaeger-trace.png 1260w" sizes="(max-width: 960px) 100vw, 960px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
    </span></p><p>A powerful debugging tool results from correlating log data with trace data (and metrics, too).
You can correlate spans with logs by filtering <code class="language-text">span_id</code> and <code class="language-text">trace_id</code> from the sample-app pod logs.
Doing so, you can gather additional information about any span from a Jaeger trace.</p><p>To view logs from the application that include span_id &amp; trace_id information:</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">oc get logs -n otel-dev <span class="token punctuation">[</span>sample-app-podname<span class="token punctuation">]</span></code></pre></div><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:960px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:25.83333333333333%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAnUlEQVQY021PSw4FIQhj5Qf8oMnc/5xudFIymLd4i4Yi2FJ6nme11g4z75zzKaUYwJn5iIjVlJIB3Ge1VpujAjHGQ6pqgrXWjeHHT+/9Ln+GxlXVZuBjjNvDjIgOiciCY855w8Hd/SK8AXjD5X7lbxITcpRSFhYQ2Zc9lgui4loXdP5XsPe+cHJrzSKDIwpiovfP6OecNy64I4RwBV8sD2/dOVlbLwAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="Logs Injected with Trace Data" title="Logs Injected with Trace Data" src="/static/f4763cbbbfa6d2aa075a31d81437dda2/7d769/logs-with-traces.png" srcSet="/static/f4763cbbbfa6d2aa075a31d81437dda2/5243c/logs-with-traces.png 240w,/static/f4763cbbbfa6d2aa075a31d81437dda2/ab158/logs-with-traces.png 480w,/static/f4763cbbbfa6d2aa075a31d81437dda2/7d769/logs-with-traces.png 960w,/static/f4763cbbbfa6d2aa075a31d81437dda2/25ca4/logs-with-traces.png 1257w" sizes="(max-width: 960px) 100vw, 960px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
    </span></p><h3>Summary</h3><p>Now that <code class="language-text">Red Hat Distributed Tracing Platform</code> and <code class="language-text">Red Hat Distributed Tracing Data Collection</code> are deployed in the <code class="language-text">Smaug</code> cluster, viewing OTLP data from instrumented applications is a breeze!</p><ol start="0"><li>Install Red Hat Distributed Tracing Platform &amp; Red Hat Distributed Tracing Data Collection from the Operator Hub<ul><li>these are already running in the Smaug cluster</li></ul></li><li>Deploy an OTLP instrumented application</li><li>Create an <code class="language-text">OpenTelemetryCollector</code> in the project/namespace</li><li>Create a <code class="language-text">Jaeger</code> instance in the project/namespace</li><li>Edit the collector resource to configure a Jaeger exporter at<ul><li><code class="language-text">jaeger-name.collector-headless.project-name.svc:14250</code> (grpc)</li></ul></li></ol><p>The example application is quite boring - try out your own application in <code class="language-text">Operate-First</code>!</p></div><div class="mantine-t5gmsl"><div class="mantine-Container-root mantine-1ca9d6u"><div class="mantine-Group-root mantine-1hzsh3c"><a class="mantine-Text-root mantine-Anchor-root mantine-Group-child mantine-ab1soz" href="https://openinfra.dev/legal/code-of-conduct" target="_blank">Code of Conduct</a></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/distributed-tracing";window.___webpackCompilationHash="ebf2d2d28c600c480443";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-6a4415c3886e0b028805.js"],"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-blog-query-tsx":["/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-blog-query-tsx-cf896621288a1af490b3.js"],"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx":["/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-34ec7c9d7cb35ac13390.js"],"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-tag-query-tsx":["/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-tag-query-tsx-81f48c3d7b217319b8d6.js"],"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-tags-query-tsx":["/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-tags-query-tsx-cb4d5a71fc80637ea852.js"],"component---src-lekoarts-gatsby-theme-minimal-blog-core-templates-homepage-query-tsx":["/component---src-lekoarts-gatsby-theme-minimal-blog-core-templates-homepage-query-tsx-b137f633ecccf5d181cb.js"],"component---src-pages-404-js":["/component---src-pages-404-js-9b75ce871f9395d73bec.js"],"component---src-pages-about-js":["/component---src-pages-about-js-c8c223f975de241393bd.js"],"component---src-pages-action-js":["/component---src-pages-action-js-94ea2a1085708f3be5f6.js"],"component---src-pages-community-cloud-js":["/component---src-pages-community-cloud-js-dbbdb1125f6e6a9b752e.js"],"component---src-pages-community-handbook-pulp-usage-md-js":["/component---src-pages-community-handbook-pulp-usage-md-js-33b6904868752e8d3b5c.js"],"component---src-pages-data-scientist-js":["/component---src-pages-data-scientist-js-dd46c9e14856fee3e884.js"],"component---src-pages-developer-js":["/component---src-pages-developer-js-2f26dfe262a78fda1e21.js"],"component---src-pages-docs-training-js":["/component---src-pages-docs-training-js-d85b5d2f5785c124d804.js"],"component---src-pages-getting-started-js":["/component---src-pages-getting-started-js-a1bd66f8c3433459524b.js"],"component---src-pages-index-js":["/component---src-pages-index-js-ce54aaa7e8618eb19d7a.js"],"component---src-pages-meetup-js":["/component---src-pages-meetup-js-c836e81296d719bd8356.js"],"component---src-pages-meetup-lp-js":["/component---src-pages-meetup-lp-js-0067e9769cc87af256af.js"],"component---src-pages-our-community-js":["/component---src-pages-our-community-js-2c8c492e40e7c2a16e47.js"],"component---src-pages-srepractices-js":["/component---src-pages-srepractices-js-ecee40b60b98863fe2e5.js"]};/*]]>*/</script><script src="/app-6a4415c3886e0b028805.js" async=""></script><script src="/framework-b931165a5e21ad4ea3a1.js" async=""></script><script src="/webpack-runtime-e8d558ca1c140937ffcc.js" async=""></script></body></html>